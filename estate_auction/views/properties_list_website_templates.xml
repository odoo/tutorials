<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="properties_list_website" inherit_id="estate.properties_list_website">
        <xpath expr="//form[@action='/properties']/button" position="before">
            <select name="sale_mode" class="form-control">
                <option value="">Select Sale Mode</option>
                <option value="auction">Auction</option>
                <option value="regular">Regular</option>
            </select>
        </xpath>
    </template>

    <template id="property_details_website" inherit_id="estate.property_details_website">
        <xpath expr="//div[hasclass('card-body')]/h5[@t-field='property.name']" position="replace">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h3 class="card-title text-primary fw-bold" t-field="property.name" />
                </div>
                <div t-if="property.sale_mode == 'auction'">
                    <t t-if="property.auction_state == 'template'">
                        <div class="alert alert-info"><strong>Auction Not Started</strong></div>
                    </t>
                    <t t-elif="property.auction_state == 'auction'">
                        <div class="text-center mt-3">
                            <span id="auction-countdown" class="p-3 fs-5" t-att-data-end-time="property.auction_end_time" />
                        </div>
                    </t>
                    <t t-elif="property.auction_state == 'sold'">
                        <div class="alert alert-success"><strong>Auction Ended</strong></div>
                    </t>
                </div>
            </div>
        </xpath>

        <xpath expr="//a[@href='/properties']" position="before">
            <t t-if="property.auction_state != 'template'">
                <a t-attf-href="/property/offer_form/{{property.id}}" class="btn btn-primary w-100 mt-2">Create Offer</a>            
            </t>
        </xpath>
    </template>
</odoo>
