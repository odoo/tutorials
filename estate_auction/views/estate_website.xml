<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherited Estate Property Detail Page -->
    <template id="property_detail_page_inherit" inherit_id="estate.property_detail_page" name="Estate Property Description - Auction Button">
        <xpath expr="//div[1]/div[2]" position="inside">
            <t t-if="property.property_sale_format == 'auction' and property.auction_stage == '02_auction'">
                <div class="col-md-6">
                    <a t-att-href="'/property/auction/%d' % property.id" class="btn btn-warning">
                        <i class="fa fa-gavel"></i> Participate in Auction
                    </a>
                </div>
            </t>
        </xpath>
    </template>

    <template id="create_bid" name="Create Bid Form">
        <t t-call="website.layout">
            <div class="d-flex justify-content-center">
                <div class="">
                    <h2>Add offer for <t t-esc="property.name"/></h2>
                    <form action="/property/auction/bid" method="post" enctype="multipart/form-data" class="mt-4">
                        <div class="row justify-content-center">
                            <input type="hidden" name="property_id" t-att-value="property.id"/>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <div class="col-lg-12">
                                <div class="mb-3 row align-items-center">
                                    <label for="pdf_file" class="col-sm-3 col-form-label text-end">Name:</label>
                                    <div class="col-sm-9">
                                        <input type="text" id="name" name="name" t-att-value="request.env.user.name" readonly="true" class="form-control"/>
                                    </div>
                                </div>
                                <div class="mb-3 row align-items-center">
                                    <label for="pdf_file" class="col-sm-3 col-form-label text-end">Bid Amount:</label>
                                    <div class="col-sm-9">
                                        <input type="number" id="bid_amount" name="bid_amount" required="true" class="form-control"/>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                    <a t-att-href="'/property/%d' % property.id" class="btn btn-primary">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </t>
    </template>

    <template id="generic_message" name="Generic Message">
        <t t-call="website.layout">
            <div class="d-flex justify-content-center">
                <div class="">
                    <h2>Message</h2>
                    <p t-esc="message"></p>
                </div>
            </div>
            <div class="text-center mt-4">
                    <a href="/property" class="btn btn-primary">
                        <i class="fa fa-home"></i> Back to Property List
                    </a>
            </div>
        </t>
    </template>
</odoo>
