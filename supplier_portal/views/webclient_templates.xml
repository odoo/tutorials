<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="supplier_portal_login" inherit_id="web.login">
        <xpath expr="//div[hasclass('oe_login_buttons')]" position="inside">
            <button type="submit" name="redirect" value="/supplier_portal" class="btn btn-link btn-sm">Log into Supplier Portal</button>
        </xpath>
    </template>

    <template id="supplier_portal_login_success">
        <t t-call="web.login_layout">
            <div class="oe_login_form">
                <p>Welcome, Supplier! Please upload your documents.</p>

                <form action="/supplier_portal/upload_invoice" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <label for="organisation">Select Organisation</label>
                        <select name="organisation_id" class="form-control" required="1">
                            <t t-foreach="request.env.user.company_ids" t-as="company">
                                <option t-att-value="company.id">
                                    <t t-esc="company.name" />
                                </option>
                            </t>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="pdf_file">Upload PDF</label>
                        <input type="file" name="pdf_file" accept="application/pdf" required="1" class="form-control" />
                    </div>

                    <div class="form-group">
                        <label for="xml_file">Upload XML</label>
                        <input type="file" name="xml_file" accept="text/xml,application/xml" required="1" class="form-control" />
                    </div>

                    <button type="submit" class="btn btn-success mt-3">Submit</button>
                </form>

                <div class="clearfix oe_login_buttons text-center mt-3">
                    <a class="btn btn-primary" href="/web/session/logout">Log out</a>
                </div>
            </div>
        </t>
    </template>

    <template id="supplier_portal_upload_success">
        <t t-call="web.login_layout">
            <div class="oe_login_form">
                <p>Invoice uploaded successfully!</p>
                <a href="/supplier_portal">Go back to the portal</a>
            </div>
        </t>
    </template>

</odoo>
