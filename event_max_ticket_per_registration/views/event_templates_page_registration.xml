<?xml version="1.0"?>
<odoo>
    <template id="event_tickets_limit_template" inherit_id="website_event.modal_ticket_registration">
        <xpath expr="//div[hasclass('o_wevent_registration_single_select')]//select" position="replace">
            <select t-att-name="'nb_register-%s' % (tickets.id if tickets else 0)" class="d-inline w-auto form-select">
                <t t-if="event.ticket_max_per_registration">
                    <t t-set="seats_max_ticket" t-value="(not tickets or not tickets.seats_limited or tickets.seats_available &gt; event.ticket_max_per_registration) and event.ticket_max_per_registration + 1 or tickets.seats_available + 2"/>
                    <t t-set="seats_max_event" t-value="(not event.seats_limited or event.seats_available &gt; event.ticket_max_per_registration) and event.ticket_max_per_registration + 1 or event.seats_available + 1"/>
                    <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event) if tickets else seats_max_event"/>
                </t>
                <t t-else="">
                    <t t-set="seats_max_ticket" t-value="(not tickets or not tickets.seats_limited or tickets.seats_available &gt; 9) and 10 or tickets.seats_available + 1"/>
                    <t t-set="seats_max_event" t-value="(not event.seats_limited or event.seats_available &gt; 9) and 10 or event.seats_available + 1"/>
                    <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event) if tickets else seats_max_event"/>
                </t>
                <t t-foreach="range(0, seats_max)" t-as="nb">
                    <option t-out="nb" t-att-selected="nb == 1 and 'selected'"/>
                </t>
            </select>
        </xpath>
        <xpath expr="//div[@id='o_wevent_tickets_collapse']//select" position="replace">
            <select t-if="not ticket.is_expired and ticket.sale_available" t-attf-name="nb_register-#{ticket.id}" class="w-auto form-select">
                <t t-if="event.ticket_max_per_registration">
                    <t t-set="seats_max_ticket" t-value="(not ticket.seats_limited or ticket.seats_available &gt; event.ticket_max_per_registration) and event.ticket_max_per_registration + 1 or ticket.seats_available + 1"/>
                    <t t-set="seats_max_event" t-value="(not event.seats_limited or event.seats_available &gt; event.ticket_max_per_registration) and event.ticket_max_per_registration + 1 or event.seats_available + 1"/>
                    <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event)"/>
                </t>
                <t t-else="">
                    <t t-set="seats_max_ticket" t-value="(not ticket.seats_limited or ticket.seats_available &gt; 9) and 10 or ticket.seats_available + 1"/>
                    <t t-set="seats_max_event" t-value="(not event.seats_limited or event.seats_available &gt; 9) and 10 or event.seats_available + 1"/>
                    <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event)"/>
                </t>
                <t t-foreach="range(0, seats_max)" t-as="nb">
                    <option t-out="nb" t-att-selected="len(ticket) == 0 and nb == 0 and 'selected'"/>
                </t>
            </select>
        </xpath>
    </template>
</odoo>
