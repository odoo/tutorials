<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="action_x_estate_property_offer_accept" model="ir.actions.server">
        <field name="name">Accept Offer</field>
        <field name="model_id" ref="estate.model_real_estate_property_offer"/>
        <field name="state">code</field>
        <field name="code"><![CDATA[
    for offer in records:
        offer.write({'x_status': 'accepted'})
        offer.x_property_id.write({'x_selling_price': offer.x_price, 'x_partner_id': offer.x_partner_id})
        for other_offer in offer.x_property_id.x_offer_ids:
            if other_offer != offer:
                other_offer.write({'x_status': 'refused'})
        ]]></field>
    </record>

    <record id="server_action_estate_list" model="ir.actions.server">
        <field name="name">Estate List</field>
        <field name="model_id" ref="estate.model_real_estate_property" />
        <field name="website_published">True</field>
        <field name="website_path">estate</field>
        <field name="state">code</field>
        <field name="code"><![CDATA[
html = '<html><body><h1>Properties</h1><ul>'
for property in request.env['x_estate.property'].search([]):
    html += f'<li>{property.x_name}</li>'
html += '</ul></body></html>'
response = request.make_response(html)
        ]]></field>
    </record>
</odoo>
