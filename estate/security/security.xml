<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <record id="estate_group_user" model="res.groups">
            <field name="name">Agent</field>
            <field name="category_id" ref="base.module_category_real_estate_brokerage"/>
        </record>
    
        <record id="estate_group_manager" model="res.groups">
            <field name="name">Manager</field>
            <field name="category_id" ref="base.module_category_real_estate_brokerage"/>
            <field name="implied_ids" eval="[(ref('estate_group_user'))]"/>
            <field name="users" eval="[(4, ref('base.user_admin'))]"/>
        </record>
    
        <record id="rule_agent_limit_id" model="ir.rule">
            <field name="name">1.rule which limits agents to only being able to see or modify properties which have no salesperson, or for which they are the salesperson. 2.All agents can see all companies, which is not desirable, add the record rule restricting this behaviour.</field>
            <field name="model_id" ref="estate.model_estate_property"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="groups" eval="[Command.link(ref('estate.estate_group_user'))]"/>
            <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids), '|', ('seller_id', '=', False), ('seller_id', '=', user.id)
            ]</field>
        </record>
    
        <record id="rule_manager_limit_id" model="ir.rule">
            <field name="name">There are no restriction for manager.</field>
            <field name="model_id" ref="estate.model_estate_property"/>
            <field name="perm_unlink" eval="False"/>
            <field name="groups" eval="[Command.link(ref('estate.estate_group_manager'))]"/>
            <field name="domain_force">[(1,'=',1)]</field>
        </record>
    </data>
</odoo>