<?xml version='1.0' encoding='utf-8'?>
<odoo>
  <data>
    <record id='estate_group_user' model='res.groups'>
      <field name='name'>Agent</field>
      <field name='category_id' ref='base.module_category_real_estate_brokerage'/>
      <field name='comment'>The user will be able to approve document created by employees.</field>
    </record>

    <record id='estate_group_manager' model='res.groups'>
      <field name='name'>Manager</field>
      <field name='category_id' ref='base.module_category_real_estate_brokerage'/>
      <field name='implied_ids' eval='[(4, ref("estate_group_user"))]'/>
      <field name='comment'>The user will be able to approve document created by employees.</field>
    </record>

    <record id="estate_property_agent_rule" model="ir.rule">
      <field name="name">Estate Property: Agent Access</field>
      <field name="model_id" ref="model_estate_property"/>
      <field name="groups" eval="[(4, ref('estate_group_user'))]"/>
      <field name="domain_force">[
        '|', ('sales_person_id', '=', False), 
             ('sales_person_id', '=', user.id)
        ]</field>
    </record>

    <record id="estate_property_agent_company_rule" model="ir.rule">
      <field name="name">Estate Company: Agent Access</field>
      <field name="model_id" ref="model_estate_property"/>
      <field name="groups" eval="[(4, ref('estate_group_user'))]"/>
      <field name="domain_force">[
        '|', ('company_id', '=', False),
             ('company_id', '=', 'company_ids')
        ]</field>
    </record>

    <record id="estate_property_manager_rule" model="ir.rule">
      <field name="name">Estate Property: Manager Access</field>
      <field name="model_id" ref="model_estate_property"/>
      <field name="groups" eval="[(4, ref('estate_group_manager'))]"/>
      <field name="domain_force">[(1, '=', 1)]</field>
    </record>
  </data>
</odoo>

