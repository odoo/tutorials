<odoo>
<record id="estate_property_action" model="ir.actions.act_window">
    <field name="name">Property</field>
    <field name="res_model">estate.property</field>
    <field name="view_mode">list,form</field>
    <field name="context">{'search_default_state': 1}</field>
</record>
    <menuitem id="estate_property_menu_action" action="estate_property_action"/>

<record id ="estate_property_view_tree" model = "ir.ui.view">
    <field name="name">estate.property.list</field>
    <field name='model'>estate.property</field>
    <field name="arch" type='xml'>
        <list string="channel" decoration-success="state in ('offer accepted','offer received')" decoration-bf = "state in ('offer accepted','offer received')">
            <field name="property_type_id"/>
            <field name="name" string='Title'/>
            <field name="postcode"/>
            <field name="bedrooms"/>
            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/> 
            <field name='living_area'/>
            <field name='expected_price'/>
            <field name='selling_price'/>
            <field name="date_availability" optional="hide" string="Available from"/>
        </list> 
     </field>
</record>

<record id ="estate_property_view_form" model="ir.ui.view">
    <field name = "name">estate.property.form</field>
    <field name='model'>estate.property</field>
    <field name="arch" type='xml'>
        <form string="Test">
            <header>
                <button name="sold" type='object' string="SOLD" invisible="state in ['sold','cancelled']"/>
                <button name='cancel' type='object' string='CANCEL' invisible="state in ['sold','cancelled']"/>
                <field name="state" widget="statusbar" statusbar_visible="new,offer received,offer accepted,sold,cancelled"/>
            </header>
            <sheet>
                <group>
                    <h1><field name="name" string=""/></h1>
                </group>
                <div>
                    <group>
                        <field name="property_type_id" widget="many2one" options="{'no_create': True, 'no_edit': True}"/>
                    </group>
                    <group>
                        <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                    </group>
                    <group>
                        <field name="postcode" string="PostCode"/>
                    </group>
                    <group>
                        <field name="expected_price"/>
                    </group>
                </div>
                <div>
                    <group><field name='date_availability' string = "Available From"/></group>
                    <group><field name='selling_price' string="Selling Price"/></group>
                    <group><field name='best_price' string="Best Offer"/></group>
                </div>
                <notebook>
                    <page string="Description">
                    <group>
                        <field name="description" string="Description "/>
                        <field name="bedrooms" string="Bedrooms "/>
                        <field name="living_area" string="Living Area(sqm)"/>
                        <field name='facades' string ="Facades"/>
                        <field name='garage' string='Garage'/>
                        <field name ='garden' string='Garden'/>
                        <field name='garden_area' string='Garden Area(sqm)' invisible="not garden"/>
                        <field name='garden_orientation' string="Garden Orientation" invisible="not garden"/>
                        <field name='total_area' string="Total Area"/>
                    </group>
                    </page>
                    <page string="Offers" >
                        <field name='offer_ids' readonly="state in ['offer_accepted', 'sold', 'cancelled']">
                            <list editable="bottom" open_form_view="True" decoration-success="status=='accepted'" decoration-danger="status == 'refused'" decoration-bf = "status=='accepted'">
                                <field name="price"/>
                                <field name="partner_id"/>
                                <field name="validity"/>
                                <field name="date_deadline"/>
                                <button name="offer_accept" states="draft" type="object" icon="fa-check" invisible="status in ['accepted', 'refused'] or parent.state in ['offer_accepted', 'sold', 'cancelled']" />
                                <button name="offer_refuse" states="draft" type="object" icon="fa-times" invisible="status in ['accepted', 'refused']or parent.state in ['offer_accepted', 'sold', 'cancelled']"/>
                            </list>
                        </field>
                    </page>
                    <page string="Other Info">
                        <group>
                            <field name="buyer" string="Buyer"/>
                            <field name="seller" string="Seller"/>
                        </group>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>

<record id ="estate_property_view_search" model="ir.ui.view">
    <field name="name">estate.property.view.search</field>
    <field name="model">estate.property</field>
    <field name="arch" type="xml">
        <search string="Search houses">
            <field name="name" string="Title"/>
            <field name="postcode"/>
            <field name="expected_price"/>
            <field name="bedrooms"/>
            <field name='living_area' string='Living Area (sqm)' filter_domain="[('living_area', '>=', self)]"/>
            <field name='facades'/>
            <filter string='Available' name='state' domain="['|',('state','=','new'),('state','=','offer received')]"/>
            <group expand="1" string="Group By">
                <filter string="PostCode" name="postcode" context="{'group_by':'postcode'}"/>
            </group>
        </search>
    </field>
</record>
</odoo>