<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="website_properties_list" name="Properties List">
        <t t-call="website.layout">
            <div class="container mt-5">
                <h2 class="text-center mb-4">Available Properties</h2>
                <div class="row">
                    <t t-foreach="properties" t-as="property">
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img t-if="property.property_image" t-att-src="image_data_uri(property['property_image'])" class="img-fluid rounded"/>
                                <div class="card-body">
                                    <h3 class="card-title"><t t-esc="property.name"/></h3>
                                    <t t-foreach="property.tag_ids" t-as="tag">
                                        <span class="badge bg-primary m-2">
                                            <t t-esc="tag.name"/>
                                        </span>
                                    </t>
                                    <p>Price: <t t-esc="property.expected_price"/> $</p>
                                    <p>Status: <t t-esc="property.status"/></p> 
                                    <a t-att-href="'/properties/%s' % property.id" class="btn btn-primary">View Details</a>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-4">
                <t t-if="pager">
                    <t t-call="website.pager">
                        <t t-set="pager" t-value="pager"/>
                    </t>
                </t>
            </div>
        </t>
    </template>

    <!-- Property Details template -->
    <template id="website_property_detail" name="Property Detail">
        <t t-call="website.layout">
            <div class="container mt-5 border p-3 rounded">
                <div class="mb-2">
                    <a t-att-href="'/properties/'" class="btn btn-primary">back</a>
                </div>
                <div class="row">
                    <div class="col-md-5 mt-4">
                        <h1><t t-esc="property.name"/></h1>
                        <h4><t t-esc="property.description"/></h4>
                        <t t-foreach="property.tag_ids" t-as="tag">
                            <span class="badge bg-primary m-2">
                                <t t-esc="tag.name"/>
                            </span>
                        </t>
                        <ul>
                            <li><h5>Price: <t t-esc="property.expected_price"/> $</h5></li>
                            <li><h5>Status: <t t-esc="property.status"/></h5></li>
                        </ul>
                    </div>
                    <div class="col-md-7">
                        <img t-if="property.property_image" t-att-src="image_data_uri(property['property_image'])" class="img-fluid rounded w-100"/>
                    </div>
                    <div class="container mt-4 p-4">
                        <h3 class="text-center">More Details</h3>
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped text-center">
                                <tbody>
                                    <tr>
                                        <th>Postcode</th>
                                        <td><t t-esc="property.postcode"/></td>
                                    </tr>
                                    <tr>
                                        <th>Bedrooms</th>
                                        <td><t t-esc="property.bedrooms"/></td>
                                    </tr>
                                    <tr>
                                        <th>Living Area (sqm)</th>
                                        <td><t t-esc="property.living_area"/></td>
                                    </tr>
                                    <tr>
                                        <th>Facades</th>
                                        <td><t t-esc="property.facades"/></td>
                                    </tr>
                                    <tr>
                                        <th>Garage</th>
                                        <td><t t-esc="'Yes' if property.garage else 'No'"/></td>
                                    </tr>
                                    <tr>
                                        <th>Garden</th>
                                        <td><t t-esc="'Yes' if property.garden else 'No'"/></td>
                                    </tr>
                                    <tr t-if="property.garden">
                                        <th>Garden Area (sqm)</th>
                                        <td><t t-esc="property.garden_area"/></td>
                                    </tr>
                                    <tr t-if="property.garden">
                                        <th>Garden Orientation</th>
                                        <td><t t-esc="dict(property._fields['garden_orientation'].selection).get(property.garden_orientation)"/></td>
                                    </tr>
                                    <tr>
                                        <th>Total Area (sqm)</th>
                                        <td><t t-esc="property.total_area"/></td>
                                    </tr>
                                    <tr>
                                        <th>Available From</th>
                                        <td><t t-esc="property.date_availability"/></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
