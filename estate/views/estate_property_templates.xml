<odoo>
    <template id="property_list_template" name="Property List">
        <t t-call="website.layout">
            <div class="container pt-4">
                <h2>Browse available real estate properties</h2>
                <div class="row">
                    <t t-foreach="properties" t-as="property">
                        <div class="card col-md-4 p-2">
                            <t t-if="property.property_image">
                                <img t-att-src="image_data_uri(property.property_image)" class="mb-4 rounded" alt="Property Image" width="400" height="300"/>
                            </t>
                            <h5 t-out="property.name"></h5>
                            <p><t t-out="property.expected_price"/></p>
                            <a t-att-href="'/property/%s' % property.id" class="btn btn-primary d-flex justify-content-center">View</a>
                        </div>
                    </t>
                </div>
                <div class="d-flex justify-content-center my-4">
                    <t t-call="website.pager"/>
                </div>
            </div>
        </t>
    </template>
    <template id="property_detail_template" name="Property Detail">
        <t t-call="website.layout">
            <div class="container">
                <div class="row mt-4">
                    <div class="col-md-8">
                        <h2 t-out="property.name"/>
                        <p class="text-muted">
                            Price: <t t-out="property.expected_price"/>
                            <span t-out="currency_symbol"/>
                        </p>
                        <t t-if="property.property_image">
                            <img t-att-src="image_data_uri(property.property_image)" class="img-fluid rounded mb-4" alt="Property Image" width="600" height="400"/>
                        </t>
                        <p t-out="property.description"/>
                    </div>
                    <div class="col-md-4">
                        <div class="card border p-4">
                            <h4 class="border-bottom mb-3">Property Details</h4>
                            <p><strong>Type:</strong><t t-out="property.property_type_id.name"/></p>
                            <p><strong>Bedrooms:</strong><t t-out="property.bedrooms"/></p>
                            <p><strong>postcode:</strong><t t-out="property.postcode"/></p>
                            <p><strong>Availability Date:</strong><t t-out="property.date_availability"/></p>
                            <p><strong>Size:</strong><t t-out="property.living_area"/></p>
                            <p><strong>Facades:</strong><t t-out="property.facades"/></p>
                        </div>
                        <div class="card mt-2 border p-4">
                            <h4 class="border-bottom mb-3">Your offers</h4>
                            <div t-foreach="offers" t-as="offer">
                                <p t-out="offer.price"/>
                            </div>
                            <t t-if="max_offer != 0">
                                <span class="mt-4">
                                    New offer must be higher than:
                                    <span t-out="max_offer" class="fw-bold"/>
                                </span>
                            </t>
                            <form method="POST" id="o_estate_make_offer_form" t-att-data-property-id="property.id" class="d-flex gap-2"
                                t-attf-action="/offer/create">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <input type="hidden" name="property_id" t-att-value="property.id"/>
                                <input type="number" class="form-control" name="price" required="True"/>
                                <button type="submit" class="btn btn-primary text-nowrap">Make Offer</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="row my-4">
                    <div class="col text-center">
                        <a href="/properties" class="btn btn-secondary">Back to Property List</a>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
