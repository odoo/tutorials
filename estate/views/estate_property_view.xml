<?xml version="1.0" encoding="utf-8"?>
<odoo>


<record id="estate_property_action" model="ir.actions.act_window">
    <field name="name">Estate</field>
    <field name="res_model">estate.property</field>
    
    <field name="view_mode">list,form</field>   
    <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a Property
              </p><p>
                Click the "NEW" button on the left corner to get started creating your first propety.
              </p>
            </field>
     <field name="context"> 
                {'search_default_available': True }
                </field> 
   
</record>




<record id="estate_property_view_list" model="ir.ui.view">
        <field name="name">estate_property_view_list</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <list sample="1"  decoration-success="state=='offer_accepted' or state=='offer_received'"  decoration-bf="state=='offer_accepted'" decoration-muted ="state=='sold'">
                <field name="name" string="Title"/> 
                <field name="property_type_id" />
                <field name="postcode" /> 
                <field name="tag_ids"  widget="many2many_tags" options="{'color_field': 'color'} " /> 
                <field name="bedrooms" /> 
                <field name="living_area" /> 
                <field name="expected_price"/> 
                <field name="selling_price" /> 
                <field name="date_availability" optional="hide"> 

                </field> 
            </list>
        </field>
    </record>





    

        <record id="estate_property_view_form" model="ir.ui.view">
                <field name="name">estate_property.view.form</field>
                <field name="model">estate.property</field>
                <field name="arch" type="xml">
                    <form string="estate_property_form">

                    <header>
                       <button class= "btn btn-primary"  name="sell_action" type="object" string="SOLD" invisible=" state == 'sold' or  state=='cancelled'"/>
                        <button class= "btn btn-primary"  name="cancel_action" type="object" string="CANCEL" invisible=" state == 'sold' or  state=='cancelled'"/>

                       

                        <field name="state" widget="statusbar" statusbar_visible="new,offer_received,offer_accepted,sold"/>

                    </header>

                        <sheet>
                           <h1>   <field name="name" placeholder="Property Name"></field>
                           </h1>  

                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                           

                    

                    <group>
                        <group>
                            <field name="status_button"></field>
                            <field name="property_type_id"  options="{'no_create':True}"></field>
                            <field name="postcode"></field>
                            <field name="date_availability"></field>
                        </group>
                        <group>

                            <field name="expected_price"></field>
                            <field name="selling_price"></field>
                            <field name="best_price"></field>
                            
                        </group>
                        
                    </group>

                    <notebook>
                        <page name="page1" string="Description">
                        <group name="Features" >

                            <field name="description"></field>
                            <field name="bedrooms"></field>
                            <field name="living_area"></field>
                                <field name="facades"></field>
                            <field name="garage"></field>
                            <field name="garden"></field>
                            <field name="garden_area" invisible="not garden"></field>
                            <field name="garden_orientation" invisible="not garden"></field>
                              <field name="state"></field>
                            <field name="total_area"></field>
                            
                            

                        </group>
                        </page>

                        <page name="page_Offers" string="Offers">
                        <group>
                            <field name="offer_ids"   nolabel="1" readonly ="state=='offer_accepted' or state=='cancelled' or state=='sold' " >
                                <list sample="1"  editable="bottom" decoration-success="status=='accepted'" decoration-danger="status=='refused'" >
                                    <field name="price" string="Price"/> 
                                    <field name="partner_id" /> 
                                  
                                    <field name="validity"></field>
                                    <field name="date_deadline"></field>
                                    <button name="tick_accept" string="Accept" states="draft" type="object" icon="fa-check" invisible="status=='accepted' or status=='refused' "/>                    
                                    <button name="cross_refuse" string="Refuse" states="draft" type="object" icon="oi-close"  invisible="status=='accepted' or status=='refused' "/>                    
                                                        
                                    
                                </list>
                            
                            </field>
                        </group>
                        </page>

                        <page name="page2" string="Other Info">
                        <group name="Users" >

                            <field name="user_id"></field>
                            <field name="partner_id"></field>
                           
                            

                        </group>
                        </page>
            
                    </notebook>
                        </sheet>
                    </form>
                </field>
        </record>



        <record id="estate_property_view_search" model="ir.ui.view">
            <field name="name">esatte.property.view.search</field>
            <field name="model">estate.property</field>
            <field name="arch" type="xml">
                <search string="Search Estate Property">
                    <field name="name" string="Title" />
                    <field name="postcode" string="Postcode" />
                    <field name="expected_price" string="Expected Price" />
                    <field name="bedrooms" string="Bedrooms " />
                    <field name="living_area" string="Living Area (sqm)" filter_domain="[ ('living_area', '>=', self )]"/>
                    <field name="facades" />

                    <filter string="Available" name="available" domain="['|', ('state', '=', 'new'), ('state', '=', 'offer_received')]"/>
                    <group expand="0" string="Group By">
                        <filter string="Postcode" name="postcode" context="{'group_by':'postcode'}"/>
                    </group>
                </search>
            </field>
        </record>   




</odoo>