<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="estate_properties_listing_template" name="Estate Properties Listing">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <div class="container py-4">
                    <h1 class="mb-4 text-center">Estate Properties</h1>

                    <form action="/estate-properties" method="get"
                        class="mb-4 bg-light p-2 rounded shadow-sm">
                        <div class="row g-3 align-items-end">
                            <div class="col-md-3">
                                <label for="statusSelect" class="form-label fw-bold">Status</label>
                                <select id="statusSelect" name="status" class="form-select">
                                    <option value="all" t-att-selected="status == 'all'">All
                                        Available</option>
                                    <option value="new" t-att-selected="status == 'new'">New
                                        Properties</option>
                                    <option value="offer_received"
                                        t-att-selected="status == 'offer_received'">Offer Received</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="minPrice" class="form-label fw-bold">Min Price</label>
                                <input type="number" id="minPrice" name="min_price"
                                    class="form-control" placeholder="Min Price"
                                    t-att-value="min_price or ''" />
                            </div>
                            <div class="col-md-2">
                                <label for="maxPrice" class="form-label fw-bold">Max Price</label>
                                <input type="number" id="maxPrice" name="max_price"
                                    class="form-control" placeholder="Max Price"
                                    t-att-value="max_price or ''" />
                            </div>
                            <div class="col-md-2 d-grid">
                                <button type="submit" class="btn btn-primary">Filter</button>
                            </div>
                        </div>
                    </form>

                    <t t-if="properties">
                        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                            <t t-foreach="properties" t-as="prop">
                                <div class="col">
                                    <div
                                        class="card h-100 shadow-sm border-0 rounded-3 overflow-hidden">
                                        <img
                                            t-attf-src="/web/image/estate.property/image_1920"
                                            onerror="this.src='/your_module_name/static/src/img/no_image_available.png';"
                                            alt="Property Image" class="img-fluid rounded-start-4" />
                                        <div class="card-body d-flex flex-column">
                                            <h5 class="card-title text-primary mb-2">
                                                <a t-attf-href="/estate-properties/{{prop.id}}"
                                                    class="text-decoration-none">
                                                    <span t-field="prop.name" />
                                                </a>
                                            </h5>
                                            <p class="card-text fs-5 fw-bold text-success mb-3">
                                                <span t-field="prop.expected_price" />
                                            </p>
                                            <div
                                                class="d-flex justify-content-between align-items-center mt-auto">
                                                <a t-attf-href="/estate-properties/{{prop.id}}"
                                                    class="btn btn-outline-primary btn-sm rounded-pill">View
                                                    Details</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                        <div class="d-flex justify-content-center mt-5">
                            <t t-call="website.pager" />
                        </div>
                    </t>
                    <t t-else="">
                        <div class="alert alert-info text-center mt-5" role="alert">
                            No properties found with the selected status.
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>
</odoo>
