<?xml version="1.0"?>
<odoo>
    <record id="estate_rating_template" model="mail.template">
        <field name="name">Estate Property: Rating Request</field>
        <field name="email_from">{{(object.seller_id.email_formatted)}}</field> <!-- or user.email_formatted is not required, already set in mail.template model by default-->
        <field name="subject">Please Rate Your Experience</field>
        <field name="model_id" ref="estate.model_estate_property"></field>
        <field name="email_to">{{(object.buyer_id.email_formatted) }}</field>
        <field name="partner_to">{{(object.buyer_id.id) }}</field>
        <field name="auto_delete" eval="True"></field>
        <field name="body_html"><![CDATA[
            <t t-if="object.id">
                <t t-set="access_token" t-value="str(object.id)"/>
                <p>Dear Customer,</p>
                <p>How satisfied were you with your estate experience?</p>
                <ul>
                    <li><a t-att-href="'/rate/' + access_token + '/5'">Very Satisfied</a></li>
                    <li><a t-att-href="'/rate/' + access_token + '/3'">Neutral</a></li>
                    <li><a t-att-href="'/rate/' + access_token + '/1'">Dissatisfied</a></li>
                </ul>
            </t>
            <t t-else="">
                <p>Property ID not found.</p>
            </t>
        ]]></field>
    </record>
</odoo>
