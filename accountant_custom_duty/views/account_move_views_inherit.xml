<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_move_form_import_export_custom_duty" model="ir.ui.view">
        <field name="name">account.move.form.import.export.custom.duty</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="action_open_wizard" string="Bill of Entry" class="oe_highlight" type="object" invisible="not l10n_in_custom_duty or is_confirmed or state != 'posted' or l10n_in_gst_treatment not in ['overseas','special_economic_zone','deemed_export', 'in_invoice'] or move_type not in ('in_invoice', 'in_refund', 'in_receipt')"/>
            </xpath>
            <xpath expr="//sheet/div" position="inside">
                <button type="object" class="oe_stat_button" name="action_move_journal_line_bill_of_entry" icon="fa-list" invisible="not is_confirmed">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_text">Bill of Entry</span>
                    </div>
                </button>
            </xpath>
            <xpath expr="//notebook/page[@id='aml_tab']" position="before">
                <page name="Bill of entry details" string="Bill of entry details" invisible="not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft'">
                    <field name="bill_of_entry_line_ids" widget="one2many_list">
                        <list editable="bottom" string="Journal Items">
                            <field name="product_id" />
                            <field name="l10n_in_assessable_value" />
                            <field name="l10n_in_custom_duty_additional"/>
                            <field name="l10n_in_taxable_amount"/>
                            <field name="tax_ids" widget="many2many_tags"/>
                            <field name="l10n_in_tax_amount"/>
                            <field name="l10n_in_company_currency_id" column_invisible="1" />
                        </list>
                    </field>
                    <group col="12" class="oe_invoice_lines_tab overflow-hidden">
                        <group colspan="8">
                        </group>

                        <group colspan="4" class="oe_subtotal_footer">
                            <span class="oe_subtotal_footer_separator" invisible="state == 'draft'"/>
                            <field name="l10n_in_total_custom_duty"/>
                            <field name="l10n_in_total_l10n_in_tax_amount"/>
                            <field name="l10n_in_total_amount_payable"/>
                        </group>
                    </group>
                </page>
            </xpath>

            <xpath expr="//group[@id='header_left_group']" position="before">
                <group invisible="not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft'">
                    <field name="name" string="Journal Entry Number" readonly="1"/>
                    <field name="date" readonly="1"/>
                    <field name="invoice_vendor_bill_id" nolabel="1" invisible="state != 'draft' or move_type != 'in_invoice'"/>
                    <field name="journal_id" groups="account.group_account_readonly" options="{'no_create': True, 'no_open': True}" readonly="posted_before and name not in (False, '', '/')"/>
                    <field name="l10n_in_custom_currency_rate" readonly="1"/>
                    <field name="l10n_in_company_currency_id" invisible="1" />

                </group>
                <group invisible="not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft'">
                    <field name="l10n_in_reference" readonly="1"/>
                    <field name="l10n_in_shipping_bill_number" readonly="1"/>
                    <field name="l10n_in_shipping_bill_date" readonly="1"/>
                    <field name="l10n_in_shipping_port_code_id" readonly="1"/>
                </group>
            </xpath>
            <xpath expr="//sheet/div[hasclass('oe_title')]" position="attributes">
                    <attribute name="invisible">not (not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft')</attribute>
            </xpath>
            <xpath expr="//group[@id='header_left_group']" position="attributes">
                <attribute name="invisible">not (not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft')</attribute>
            </xpath>
            <xpath expr="//group[@id='header_right_group']" position="attributes">
                    <attribute name="invisible">not (not l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft')</attribute>
            </xpath>
            <xpath expr="//page[@id='other_tab_entry']" position="attributes">
                    <attribute name="invisible">(l10n_in_custom_currency_rate or move_type in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or state == 'draft')</attribute>
            </xpath>
        </field>
    </record>

</odoo>
