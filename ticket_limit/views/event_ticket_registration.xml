<?xml version="1.0" encoding="UTF-8"?>
<odoo> 

 <template id="modal_ticket_registration" name="Modal for tickets registration" inherit_id="website_event.modal_ticket_registration">
      
        <xpath expr="//t[@t-set='seats_max_ticket']" position="replace">
            <t t-set="seats_max_ticket" t-value="min(ticket.tickets_per_registration, ticket.seats_available) + 1 if ticket.seats_limited else ticket.tickets_per_registration + 1"/>
        </xpath>

        <xpath expr="//t[@t-set='seats_max_event']" position="replace">
            <t t-set="seats_max_event" t-value="event.seats_available + 1 if event.seats_limited else ticket.tickets_per_registration + 1"/>
        </xpath>
        
        <xpath expr="//div[hasclass('o_wevent_registration_single_select')]" position="replace">
            <select t-att-name="'nb_register-%s' % (tickets.id if tickets else 0)" class="d-inline w-auto form-select">
                <t t-set="seats_max_ticket" 
                    t-value=" 
                        tickets.tickets_per_registration if not tickets else (
                           min(tickets.tickets_per_registration, tickets.seats_available) 
                           if tickets.seats_available and tickets.tickets_per_registration 
                           else tickets.tickets_per_registration
                        ) if tickets else event.default_registration_tickets
                "/>
                <t t-set="seats_max_event" t-value="event.seats_available if event.seats_limited else seats_max_ticket"/>
                <t t-set="seats_max" t-value="min(seats_max_event, seats_max_ticket)"/> 
                <t t-foreach="range(1, seats_max + 1)" t-as="nb">
                    <option t-out="nb" t-att-selected="nb == 1 and 'selected'"/>
                </t>
            </select>
        </xpath>
    </template>
</odoo>
