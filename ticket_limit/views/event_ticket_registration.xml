<?xml version="1.0" encoding="UTF-8"?>
<odoo> 

 <template id="modal_ticket_registration" name="Modal for tickets registration" inherit_id="website_event.modal_ticket_registration">
      
        <xpath expr="//t[@t-set='seats_max_ticket']" position="attributes">
            <attribute name="t-value">
                min(ticket.tickets_per_registration, ticket.seats_available) + 1 if ticket.seats_limited else ticket.tickets_per_registration + 1
            </attribute>
        </xpath>

        <xpath expr="//t[@t-set='seats_max_event']" position="attributes">
            <attribute name="t-value">
                event.seats_available + 1 if event.seats_limited else ticket.tickets_per_registration + 1
            </attribute>
        </xpath>
        
        <xpath expr="//div[hasclass('o_wevent_registration_single_select')]/select/t[@t-set='seats_max_ticket']" position="attributes">
            <attribute name="t-value">
                    min(tickets.tickets_per_registration, tickets.seats_available)  
                    if (tickets and tickets.seats_limited) 
                    else (
                        tickets.tickets_per_registration if tickets 
                        else event.default_registration_tickets
                    )           
            </attribute> 
        </xpath> 
    
        <xpath expr="//div[hasclass('o_wevent_registration_single_select')]/select/t[@t-set='seats_max_event']" position="attributes">
            <attribute name="t-value">
                event.seats_available if event.seats_limited else seats_max_ticket
            </attribute>
        </xpath> 

        <xpath expr="//div[hasclass('o_wevent_registration_single_select')]/select/t[@t-set='seats_max']" position="attributes">
            <attribute name="t-value">
                min(seats_max_event, seats_max_ticket) + 1 
            </attribute>
        </xpath>   
        
    </template>
</odoo>
