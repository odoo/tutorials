<odoo>

    <template id="address_inherit" inherit_id="website_sale.address">
        <xpath expr="//div[@id='company_name_div']" position="attributes">
            <attribute name="class">d-none</attribute>
        </xpath>

        <xpath expr="//div[@id='div_vat']" position="attributes">
            <attribute name="class">d-none</attribute>
        </xpath>
    </template>

    <template id="billing_address_row_inherit" inherit_id="website_sale.billing_address_row">
        <xpath expr="//div[@id='billing_address_row']" position="attributes">
            <attribute name="class">d-none</attribute>
        </xpath>
    </template>

    <template id="tax_credit_row">
        <div id="tax_credit_row">
            <h4 class="fs-6 fw-bold">BILLING ADDRESS</h4>
            <t t-set="has_delivery" t-value="order._has_deliverable_products()" />
            <div t-if="has_delivery">
                <label id="want_tax_credit_label" class="form-switch mt-3 mb-3">
                    <input
                        type="checkbox"
                        id="want_tax_credit_checkbox"
                        class="form-check-input"
                        name="want_tax_credit"
                        t-att-checked="'checked' if not use_delivery_as_billing else None"
                    /> Want
                    tax-credit </label>
                <div id="tax_credit_container"
                    t-attf-class="row {{'d-none' if use_delivery_as_billing else ''}}">
                    <input type="hidden" id="partner_id" name="partner_id"
                        t-att-value="order.partner_invoice_id.id if not use_delivery_as_billing else '' " />
                    <input type="hidden" id="address" name="address" />
                    <div id="vat_field" class="col-md-6">
                        <label id="vat_label" class="form-label"
                            t-esc="order.partner_invoice_id.country_id.name if not use_delivery_as_billing else 'Vat Number'">
                        </label>
                        <input
                            type="text"
                            id="vat_number"
                            name="vat"
                            class="form-control"
                            t-att-value="order.partner_invoice_id.vat if not use_delivery_as_billing else ''"
                        />
                    </div>
                    <div id="company_name_field" class="col-md-6">
                        <label class="form-label">Company Name</label>
                        <input
                            type="text"
                            id="company_name"
                            name="company_name"
                            class="form-control"
                            t-att-value="order.partner_invoice_id.name if not use_delivery_as_billing else ''"
                        />
                    </div>
                </div>
            </div>
            <t t-else="">
                <t t-call="website_sale.address_row">
                    <t t-set="is_invoice" t-value="True"/>
                    <t t-set="addresses" t-value="billing_addresses"/>
                    <t t-set="selected_address" t-value="order.partner_invoice_id"/>
                </t>
            </t>
        </div>
    </template>

    <template id="checkout_inherit_add_tax_credit_row" inherit_id="website_sale.checkout">
        <xpath expr="//div[@id='shop_checkout']" position="before">
            <div id="errors" />
        </xpath>
        <xpath expr="//t[@t-call='website_sale.billing_address_row']" position="before">
            <t t-call="billing_address_in_website_sale.tax_credit_row" />
        </xpath>
    </template>

    <template id="checkout_confirm_override" inherit_id="website_sale.navigation_buttons">
        <xpath expr="//a[@name='website_sale_main_button']" position="attributes">
            <attribute name="t-att-id">"confirm_btn" if xmlid == 'website_sale.checkout' else None</attribute>
        </xpath>
    </template>

</odoo>
